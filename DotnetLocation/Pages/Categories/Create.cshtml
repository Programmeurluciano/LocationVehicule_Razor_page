@page
@model DotnetLocation.Pages.Categories.CreateModel

@{
    ViewData["Title"] = "Créer une Catégorie";
}

<div class="title-wrapper pt-30">
    <div class="row align-items-center">
        <div class="col-md-6">
            <div class="title">
                <h2>Créer une Catégorie</h2>
            </div>
        </div>
        <!-- end col -->
        <div class="col-md-6">
            <div class="breadcrumb-wrapper">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="/">
                                Tableau de bord
                            </a>
                        </li>
                        <li class="breadcrumb-item">
                            <a asp-page="Index">Catégories</a>
                        </li>
                        <li class="breadcrumb-item active" aria-current="page">
                            Nouvelle Catégorie
                        </li>
                    </ol>
                </nav>
            </div>
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->
</div>
<!-- ========== title-wrapper end ========== -->

<div class="tables-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <div class="card-style mb-30">
                <h6 class="mb-3">Formulaire de création</h6>
                <p class="text-sm mb-20">
                    Remplissez le formulaire ci-dessous pour créer une nouvelle catégorie.
                </p>

                <div class="row">
                    <div class="col-md-12">
                        <form method="post">
                            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

                            <div class="form-group mb-3">
                                <label asp-for="Categorie.Nom" class="form-label fw-500">
                                    Nom de la catégorie <span class="text-danger">*</span>
                                </label>
                                <input asp-for="Categorie.Nom" class="form-control" aria-required="true"
                                       placeholder="Entrez le nom de la catégorie" />
                                <span asp-validation-for="Categorie.Nom" class="text-danger text-sm"></span>
                                <small class="form-text text-muted">Le nom doit être unique et descriptif</small>
                            </div>

                            <div class="form-group mb-4">
                                <label asp-for="Categorie.Description" class="form-label fw-500">
                                    Description
                                </label>
                                <textarea asp-for="Categorie.Description" class="form-control" rows="4"
                                          placeholder="Décrivez brièvement cette catégorie"></textarea>
                                <span asp-validation-for="Categorie.Description" class="text-danger text-sm"></span>
                            </div>

                            <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
                                <a asp-page="Index" class="main-btn light-btn btn-hover">
                                    <i class="lni lni-arrow-left me-2"></i> Retour à la liste
                                </a>
                                <button type="submit" class="main-btn primary-btn btn-hover">
                                    <i class="lni lni-checkmark-circle me-2"></i> Créer la catégorie
                                </button>
                            </div>
                        </form>
                    </div>
                    </div>
            </div>
            <!-- end card -->
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        // Focus sur le premier champ du formulaire
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('Categorie_Nom').focus();

            // Validation en temps réel
            const form = document.querySelector('form');
            const inputs = form.querySelectorAll('input[required], textarea');

            inputs.forEach(input => {
                input.addEventListener('blur', function() {
                    this.classList.toggle('is-invalid', !this.value.trim() && this.required);
                    this.classList.toggle('is-valid', this.value.trim());
                });
            });
        });
    </script>
}